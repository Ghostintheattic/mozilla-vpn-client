{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Util: Pring Logfile",
            "type": "shell",
            "osx": {
                "command": "tail -f '~/Library/Application Support/mozillavpn.txt'"
            },
            "command": "echo 'Unsupported'; exit 1",
            "problemMatcher": []
        },
        {
            "label": "Build: (host)",
            "type": "shell",
            "osx": {
                "command": "./.vscode/task_scripts/macos.sh"
            },
            "windows": {
                "command": "${workspaceFolder}/.vscode/task_scripts/build_deploy.ps1",
                "options": {
                    "cwd": "${workspaceFolder}/",
                    "shell": {
                        "executable": "powershell.exe"
                    }
                }
            },
            "group": "build",
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [
                "$gcc",
                "$rustc",
                "$go"
            ]
        },
        {
            "label": "Build: (Android)",
            "type": "shell",
            "command": "./scripts/android/cmake.sh ~/Qt/6.2.4/android_arm64_v8a",
            "group": "build",
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [
                "$gcc",
                "$rustc",
                "$go"
            ]
        },
        {
            "label": "Build: (iOS)",
            "type": "shell",
            "command": "./scripts/macos/apple_compile.sh ios",
            "group": "build",
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": [
                "$gcc",
                "$rustc",
                "$go"
            ]
        },
        {
            "type": "cmake",
            "label": "Build: unit-tests",
            "command": "build",
            "targets": [
                "unit_tests"
            ],
            "group": "build",
            "problemMatcher": [
                "$gcc",
                "$rustc",
                "$go"
            ]
        },
        {
            "label": "Format: C++",
            "type": "shell",
            "command": "git clang-format",
            "group": "none",
            "options": {
                "cwd": "${workspaceFolder}"
            },
            "problemMatcher": ["$gcc",]
        },
        {
            "label": "Format: Kotlin",
            "type": "shell",
            "command": "./gradlew ktlintFormat || true", // This always fails, for jvm reasons, but it will format :) 
            "group": "none",
            "options": {
                "cwd": "${workspaceFolder}/android"
            },
        },
        {
            "label": "Format: QML",
            "type": "shell",
            "command": "./scripts/utils/format_qml.sh",
            "group": "none",
            "options": {
                "cwd": "${workspaceFolder}"
            },
        },

    ]
}
